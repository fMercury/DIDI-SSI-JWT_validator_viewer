<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DIDI Issuer Server</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body>
    <div class="container">
      <h1 class="display-4 p-3">Certificado</h1>
      <div class="alert alert-danger d-none" role="alert">
        <strong>Error:</strong> <span></span>
      </div>
      <div class="card mt-2">
        <div class="card-body">
          <h5 class="card-title text-center" id="iss"></h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><div class="row"><span class="col-2">Nombre:</span><span class="col-10" id="nombre"></span></div></li>
            <li class="list-group-item"><div class="row"><span class="col-2">Apellido:</span><span class="col-10" id="apellido"></span></div></li>
            <li class="list-group-item"><div class="row"><span class="col-2">Curso:</span> <span class="col-10" id="curso"></span></div></li>
            <li class="list-group-item"><div class="row"><span class="col-2">Duraci√≥n:</span> <span class="col-10" id="duracion"></span></div></li>
            <li class="list-group-item"><div class="row"><span class="col-2">Fecha fin:</span><span class="col-10" id="fecha_fin"></span></div></li>
            <li class="list-group-item">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod</li>
            <li class="list-group-item"><button class="btn btn-secondary" type="button" onclick="window.history.back()">Volver</button></li>
          </ul>
        </div>
      </div>
    </div>
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/custom.js"></script>
  </body>
  <script>
    $(document).ready(function () {
      var code = getParameterByName('code', document.location)
      $.get("/api/credential/" + code, function (res) {
        console.log(res)
        if (res.status === 'success') {
          let didiserver = res.data.didiserver
          let iss = res.data.iss
          $('#iss').append(iss)
          $('#nombre').append(didiserver.nombre)
          $('#apellido').append(didiserver.apellido)
          $('#curso').append(didiserver.curso)
          $('#duracion').append(didiserver.duracion)
          $('#fecha_fin').append(didiserver.fecha_fin)
        } else if (res.status === 'fail') {
          $('.alert').removeClass('d-none')
          $('.card').addClass('d-none')
          $('.alert span').append(res.data)
        }
      });
    });
  </script>
</html>